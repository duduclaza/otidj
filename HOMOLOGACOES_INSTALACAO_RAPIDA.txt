╔════════════════════════════════════════════════════════════════════╗
║                  MÓDULO HOMOLOGAÇÕES - SETUP RÁPIDO                ║
║                        SGQ OTI DJ - v1.0.0                         ║
╚════════════════════════════════════════════════════════════════════╝

📦 ARQUIVOS CRIADOS:
════════════════════════════════════════════════════════════════════

✅ database/migrations/create_homologacoes_module.sql
   → Migration SQL completa e idempotente
   → Cria 4 tabelas + permissões + coluna department

✅ setup_homologacoes.php
   → Script PHP de instalação automática
   → Interface web amigável com verificação
   → DELETE APÓS USO POR SEGURANÇA!

✅ verificar_homologacoes_setup.php
   → Verificação do status da instalação
   → Não altera nada, apenas verifica
   → Útil para diagnóstico

✅ SETUP_HOMOLOGACOES.md
   → Documentação completa
   → Guia passo a passo
   → Troubleshooting incluído


🚀 OPÇÃO 1: INSTALAÇÃO AUTOMÁTICA (RECOMENDADO)
════════════════════════════════════════════════════════════════════

1. Acesse no navegador:
   
   http://seu-site.com/setup_homologacoes.php

2. Aguarde a execução automática

3. Verifique o relatório de sucesso

4. DELETE o arquivo setup_homologacoes.php

5. Acesse /homologacoes


📝 OPÇÃO 2: INSTALAÇÃO MANUAL (phpMyAdmin)
════════════════════════════════════════════════════════════════════

1. Acesse phpMyAdmin

2. Selecione seu banco de dados

3. Vá em SQL ou Importar

4. Execute o arquivo:
   database/migrations/create_homologacoes_module.sql

5. Verifique a execução

6. Acesse /homologacoes


🔍 VERIFICAR INSTALAÇÃO
════════════════════════════════════════════════════════════════════

Acesse:
http://seu-site.com/verificar_homologacoes_setup.php

Ou execute no SQL:

SHOW TABLES LIKE 'homologacoes%';
-- Deve retornar 4 tabelas

SELECT * FROM profile_permissions WHERE module = 'homologacoes';
-- Deve retornar configurações de perfis


📋 O QUE SERÁ INSTALADO?
════════════════════════════════════════════════════════════════════

TABELAS:
--------
✓ homologacoes              - Dados principais (Kanban)
✓ homologacoes_responsaveis - Múltiplos responsáveis  
✓ homologacoes_historico    - Log de mudanças
✓ homologacoes_anexos       - Arquivos BLOB (16MB)

COLUNAS:
--------
✓ users.department          - Departamento do usuário

PERMISSÕES:
-----------
✓ Módulo 'homologacoes'     - Admin e Super Admin


⚙️ CONFIGURAÇÃO PÓS-INSTALAÇÃO
════════════════════════════════════════════════════════════════════

1. DEPARTAMENTOS DOS USUÁRIOS:

UPDATE users SET department = 'Compras' 
WHERE email IN ('compras@empresa.com');

UPDATE users SET department = 'Logistica' 
WHERE email IN ('logistica@empresa.com');


2. PERMISSÕES ADICIONAIS:

Admin > Gerenciar Perfis > Editar perfil > Homologações


3. TESTAR:

- Acesse /homologacoes
- Crie solicitação teste
- Mova cartão no Kanban
- Verifique emails


🎯 FUNCIONALIDADES DO MÓDULO
════════════════════════════════════════════════════════════════════

INTERFACE:
- Kanban com 4 colunas
- Drag & drop de cartões
- Filtros por status
- Busca avançada

FORMULÁRIO:
- Código produto (ERP)
- Descrição detalhada
- Fornecedor
- Motivo homologação
- Múltiplos responsáveis
- Checkbox "Avisar Logística"
- Upload de anexos

NOTIFICAÇÕES:
- Email para responsáveis
- Email para depto Logística
- Histórico completo

HISTÓRICO:
- Quem moveu, quando
- Status anterior/novo
- Observações


🛠️ TROUBLESHOOTING
════════════════════════════════════════════════════════════════════

ERRO: "Table already exists"
→ NORMAL! A migration é idempotente

ERRO: "Cannot add foreign key"
→ Tabelas base não existem
→ Execute migrations do sistema primeiro

ERRO: "Access denied"
→ Verifique credenciais no .env

ERRO: "Column department not found"
→ Execute ALTER TABLE manualmente:
  ALTER TABLE users ADD COLUMN department VARCHAR(100);


✅ CHECKLIST
════════════════════════════════════════════════════════════════════

□ Executar setup_homologacoes.php OU migration manual
□ Verificar 4 tabelas criadas
□ Verificar coluna users.department
□ Verificar permissões configuradas
□ Configurar department dos usuários
□ Testar criação de homologação
□ Testar movimentação no Kanban
□ Testar notificações por email
□ Configurar permissões extras (se necessário)
□ DELETE setup_homologacoes.php


📚 DOCUMENTAÇÃO
════════════════════════════════════════════════════════════════════

Documentação completa: SETUP_HOMOLOGACOES.md
Verificação: verificar_homologacoes_setup.php
Migration SQL: database/migrations/create_homologacoes_module.sql


🆘 SUPORTE
════════════════════════════════════════════════════════════════════

1. Verifique logs PHP
2. Verifique logs MySQL
3. Execute verificar_homologacoes_setup.php
4. Revise SETUP_HOMOLOGACOES.md


════════════════════════════════════════════════════════════════════
                         FIM DO GUIA
════════════════════════════════════════════════════════════════════
