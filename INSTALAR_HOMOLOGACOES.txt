â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘          INSTALAÃ‡ÃƒO HOMOLOGAÃ‡Ã•ES - MIGRATIONS SEPARADAS            â•‘
â•‘                    SGQ OTI DJ - VersÃ£o 2.0                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ PROBLEMA RESOLVIDO:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Erro #1109 - Tabela 'profile_permissions' desconhecida

âœ… SOLUÃ‡ÃƒO: Migrations divididas em 2 partes independentes!


ğŸ“¦ OPÃ‡ÃƒO 1: SETUP AUTOMÃTICO (1 CLIQUE)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Acesse no navegador:

   https://djbr.sgqoti.com.br/setup_homologacoes.php

âœ… Executa automaticamente as 2 partes
âœ… RelatÃ³rio completo
âœ… VerificaÃ§Ã£o ao final
âš ï¸ DELETE apÃ³s uso!


ğŸ“ OPÃ‡ÃƒO 2: MANUAL - phpMyAdmin (SEGURO)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASSO 1 - Criar Tabelas:
------------------------
1. Acesse phpMyAdmin
2. Selecione banco: u230868210_djsgqpro
3. Clique em SQL
4. Execute arquivo:

   database/migrations/01_create_homologacoes_tables.sql

5. Aguarde mensagem: "âœ… SUCESSO! Todas as 4 tabelas criadas!"


PASSO 2 - Adicionar PermissÃµes:
-------------------------------
1. No mesmo phpMyAdmin
2. Clique em SQL novamente
3. Execute arquivo:

   database/migrations/02_add_homologacoes_permissions.sql

4. Aguarde mensagem: "âœ… PermissÃµes configuradas para X perfis"

   âš ï¸ SE aparecer "profile_permissions nÃ£o existe":
      - Ã‰ NORMAL! Significa que seu sistema nÃ£o usa essa tabela
      - Configure permissÃµes manualmente via Admin > Gerenciar Perfis
      - MÃ³dulo funcionarÃ¡ normalmente


ğŸ“‹ O QUE CADA ARQUIVO FAZ?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

01_create_homologacoes_tables.sql:
----------------------------------
âœ… Adiciona coluna users.department (se nÃ£o existir)
âœ… Cria tabela: homologacoes
âœ… Cria tabela: homologacoes_responsaveis
âœ… Cria tabela: homologacoes_historico
âœ… Cria tabela: homologacoes_anexos
âœ… Cria Ã­ndices e foreign keys

02_add_homologacoes_permissions.sql:
-----------------------------------
âœ… Verifica se profile_permissions existe
âœ… Verifica se profiles existe
âœ… Adiciona mÃ³dulo 'homologacoes' Ã s permissÃµes
âœ… Configura Admin/Super Admin com acesso total
âœ… Lista permissÃµes configuradas


ğŸ” VERIFICAR INSTALAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Execute no SQL:

SHOW TABLES LIKE 'homologacoes%';

Deve retornar 4 tabelas:
- homologacoes
- homologacoes_anexos
- homologacoes_historico
- homologacoes_responsaveis


âš™ï¸ CONFIGURAÃ‡ÃƒO PÃ“S-INSTALAÃ‡ÃƒO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. CONFIGURAR DEPARTAMENTOS:
   
   UPDATE users SET department = 'Compras' 
   WHERE id = 1; -- ID do usuÃ¡rio de Compras

   UPDATE users SET department = 'Logistica' 
   WHERE id = 2; -- ID do usuÃ¡rio de LogÃ­stica


2. CONFIGURAR PERMISSÃ•ES:

   Via Admin > Gerenciar Perfis > Editar perfil:
   - Marque "HomologaÃ§Ãµes" para os perfis desejados


3. TESTAR:

   Acesse: https://djbr.sgqoti.com.br/homologacoes


ğŸ†˜ TROUBLESHOOTING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ERRO: "Table 'homologacoes' already exists"
â†’ NORMAL! Significa que jÃ¡ estÃ¡ instalado
â†’ Pode ignorar

ERRO: "Unknown table 'profile_permissions'"
â†’ NORMAL! Seu sistema pode nÃ£o usar essa tabela
â†’ Configure permissÃµes via interface administrativa
â†’ MÃ³dulo funciona sem isso

ERRO: "Cannot add foreign key constraint"
â†’ Tabela users nÃ£o existe ou estÃ¡ incorreta
â†’ Verifique integridade do banco

ERRO: "Column 'department' already exists"
â†’ NORMAL! Coluna jÃ¡ existe
â†’ Pode ignorar


âœ… CHECKLIST FINAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Parte 1 executada (4 tabelas criadas)
â–¡ Parte 2 executada (permissÃµes configuradas)
â–¡ Coluna users.department existe
â–¡ Departamentos dos usuÃ¡rios configurados
â–¡ PermissÃµes ajustadas via Admin
â–¡ Acesso a /homologacoes funciona
â–¡ CriaÃ§Ã£o de homologaÃ§Ã£o funciona
â–¡ MovimentaÃ§Ã£o no Kanban funciona
â–¡ NotificaÃ§Ãµes por email funcionam
â–¡ Arquivo setup_homologacoes.php deletado


ğŸ“š ARQUIVOS DO SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Migrations:
- 01_create_homologacoes_tables.sql      (Parte 1: DDL)
- 02_add_homologacoes_permissions.sql    (Parte 2: DML)

Setup:
- setup_homologacoes.php                 (AutomÃ¡tico)
- verificar_homologacoes_setup.php       (DiagnÃ³stico)

DocumentaÃ§Ã£o:
- SETUP_HOMOLOGACOES.md                  (Completo)
- INSTALAR_HOMOLOGACOES.txt              (Este arquivo)


ğŸ¯ RESUMO EXECUTIVO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RÃPIDO (1 clique):
â†’ setup_homologacoes.php

SEGURO (manual):
â†’ Execute 01_create_homologacoes_tables.sql
â†’ Execute 02_add_homologacoes_permissions.sql

VERIFICAR:
â†’ verificar_homologacoes_setup.php


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                         PRONTO PARA USAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
